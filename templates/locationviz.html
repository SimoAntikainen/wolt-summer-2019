<html lang="en">
<head>
  <meta charset="utf-8">

  <title>The HTML5 Herald</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">

  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>



</head>

<body>

  <div id="tester" style="width:1000px;height:500px;"></div>

  <button type="button" onclick="updateVisualization()">Try it</button>

  <form action="/my-handling-form-page" method="post">
    <div>
      <label for="name">Name:</label>
      <input type="text" id="name" name="user_name">
    </div>
    <div>
      <label for="mail">E-mail:</label>
      <input type="email" id="mail" name="user_mail">
    </div>
    <div>
      <label for="msg">Message:</label>
      <textarea id="msg" name="user_message"></textarea>
    </div>
  </form>


  <script>

    var initial_data = {}
    function initializeVisualization() {
      fetch('http://localhost:5000/defaultdata')
        .then(function(response) {
          return response.json();
        })
        .then(function(plotJson) {
          //print( JSON.stringify(myJson))
          //print("adsds")
          
          TESTER = document.getElementById('tester');

          var trace1 = {
            x: Object.values(plotJson.longitude),
            y: Object.values(plotJson.latitude),
            mode: 'markers',
            type: 'scatter',
            marker: {
              size: 10,
              color: Object.values(plotJson.median),
              colorbar: {
                title: "Median",
                dtick: 2
              }
            }
          };

          var data = [trace1];

          var layout = {
            title: 'Helsinki restaurant median pickup times'
          };

          Plotly.newPlot('tester', data, layout);


          //Plotly.plot( TESTER, [{
          //x: [1, 2, 3, 4, 5],
          //y: [1, 2, 4, 8, 16] }], {
          //margin: { t: 0 } } );  
        })
    }

    initializeVisualization()
    
  </script>


  <script>
      var a = {}
      function updateVisualization() {
        fetch('http://localhost:5000/defaultdata')
        .then(function(response) {
          return response.json();
        })
        .then(function(myJson) {
          a = JSON.stringify(Object.values(myJson.location_id))
          
          printvals()
        });
      }

      function printvals() {
        console.log(a)
      }
    </script>

</body>



</html>